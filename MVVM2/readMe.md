关键点在于data如何更新view，因为view更新其实可以通过data其实事件监听即可。比如input标签监听 'input' 事件就可以实现了。所以我们着重来分析下，当数据改变，如何更新视图的。

数据更新视图的充电是如何知道数据变了，只要之道数据变了，那么接下去的事都好处理。如何知道数据变了，其实上文我们已经给出答案了，就是通过Object.defineProperty()对属性设置一个set函数，当数据改变了就会触发这个函数，所以我们只要将一些需要更新的方案放在这里面就可以实现data更新view了。



## 实现过程

我们已经知道实现数据的双向绑定，首先对数据进行劫持监听，所以我们需要设置一个监听器Observer, 用来监听所有属性。如果属性发生变化了，就需要告诉订阅者Watcher是否需要更新。因为订阅者是有很多个，所以我们需要有一个消息定乐器Dep来专门收集这些订阅者，然后在监听器Observer和订阅者 Watcher 之间进行统一管理的。接着，我们还需要有一个指令解析器Compile,对每个节点元素进行扫描和解析，将相关指令对应初始化成一个订阅者Watcher，并替换模板数据或者绑定相应的函数，此时当订阅者Watcher接收到相应属性的变化，就会执行对应的更新函数，从而更新视图。因此接下来我们执行以下3个步骤，实现数据的双向绑定：

1.实现一个监听器Observer，用来劫持并监听所有属性，如果有变动的，就通知订阅者。

2.实现一个订阅者Watcher，可以收到属性的变化通知并执行相应的函数，从而更新视图。

3.实现一个解析器Compile，可以扫描和解析每个节点的相关指令，并根据初始化模板数据以及初始化相应的订阅者。

